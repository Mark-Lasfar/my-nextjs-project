{"version":3,"names":["ProfileForm","cov_xdz0zj0u1","s","f","router","_navigation","useRouter","data","session","update","_react","useSession","form","_reacthookform","useForm","resolver","_zod","zodResolver","_validator","UserNameSchema","defaultValues","name","b","user","toast","_usetoast","useToast","onSubmit","values","res","_useractions","updateUserName","success","variant","description","message","newSession","push","_jsxruntime","jsx","_form","Form","jsxs","handleSubmit","className","FormField","control","render","field","FormItem","FormLabel","FormControl","_input","Input","placeholder","FormMessage","_button","Button","type","size","disabled","formState","isSubmitting"],"sources":["/home/mark/Downloads/nextjs-amazona-main/app/[locale]/(root)/account/manage/name/profile-form.tsx"],"sourcesContent":["'use client'\n\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { useSession } from 'next-auth/react'\nimport { useForm } from 'react-hook-form'\nimport { z } from 'zod'\nimport { useRouter } from 'next/navigation'\n\nimport { Button } from '@/components/ui/button'\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form'\nimport { Input } from '@/components/ui/input'\nimport { useToast } from '@/hooks/use-toast'\nimport { updateUserName } from '@/lib/actions/user.actions'\nimport { UserNameSchema } from '@/lib/validator'\n\nexport const ProfileForm = () => {\n  const router = useRouter()\n  const { data: session, update } = useSession()\n  const form = useForm<z.infer<typeof UserNameSchema>>({\n    resolver: zodResolver(UserNameSchema),\n    defaultValues: {\n      name: session?.user?.name ?? '',\n    },\n  })\n  const { toast } = useToast()\n\n  async function onSubmit(values: z.infer<typeof UserNameSchema>) {\n    const res = await updateUserName(values)\n    if (!res.success)\n      return toast({\n        variant: 'destructive',\n        description: res.message,\n      })\n\n    const { data, message } = res\n    const newSession = {\n      ...session,\n      user: {\n        ...session?.user,\n        name: data.name,\n      },\n    }\n    await update(newSession)\n    toast({\n      description: message,\n    })\n    router.push('/account/manage')\n  }\n  return (\n    <Form {...form}>\n      <form\n        onSubmit={form.handleSubmit(onSubmit)}\n        className=\"  flex flex-col gap-5\"\n      >\n        <div className=\"flex flex-col gap-5\">\n          <FormField\n            control={form.control}\n            name=\"name\"\n            render={({ field }) => (\n              <FormItem className=\"w-full\">\n                <FormLabel className=\"font-bold\">New name</FormLabel>\n                <FormControl>\n                  <Input\n                    placeholder=\"Name\"\n                    {...field}\n                    className=\"input-field\"\n                  />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n        </div>\n\n        <Button\n          type=\"submit\"\n          size=\"lg\"\n          disabled={form.formState.isSubmitting}\n          className=\"button col-span-2 w-full\"\n        >\n          {form.formState.isSubmitting ? 'Submitting...' : 'Save Changes'}\n        </Button>\n      </form>\n    </Form>\n  )\n}\n"],"mappings":"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","ignoreList":[]}