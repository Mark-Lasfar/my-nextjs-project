{"version":3,"names":["BrowsingHistoryList","className","cov_1rs8iv1w8v","f","products","s","_usebrowsinghistory","default","t","_nextintl","useTranslations","b","length","_jsxruntime","jsxs","jsx","_separator","Separator","_utils","cn","ProductList","title","type","hideDetails","excludeId","data","setData","_react","useState","useEffect","fetchProducts","res","fetch","map","product","category","join","id","json","_productslider"],"sources":["/home/mark/Downloads/nextjs-amazona-main/components/shared/browsing-history-list.tsx"],"sourcesContent":["'use client'\nimport useBrowsingHistory from '@/hooks/use-browsing-history'\nimport React, { useEffect } from 'react'\nimport ProductSlider from './product/product-slider'\nimport { useTranslations } from 'next-intl'\nimport { Separator } from '../ui/separator'\nimport { cn } from '@/lib/utils'\n\nexport default function BrowsingHistoryList({\n  className,\n}: {\n  className?: string\n}) {\n  const { products } = useBrowsingHistory()\n  const t = useTranslations('Home')\n  return (\n    products.length !== 0 && (\n      <div className=\"bg-background\">\n        <Separator className={cn('mb-4', className)} />\n        <ProductList\n          title={t(\"Related to items that you've viewed\")}\n          type=\"related\"\n        />\n        <Separator className=\"mb-4\" />\n        <ProductList\n          title={t('Your browsing history')}\n          hideDetails\n          type=\"history\"\n        />\n      </div>\n    )\n  )\n}\n\nfunction ProductList({\n  title,\n  type = 'history',\n  hideDetails = false,\n  excludeId = '',\n}: {\n  title: string\n  type: 'history' | 'related'\n  excludeId?: string\n  hideDetails?: boolean\n}) {\n  const { products } = useBrowsingHistory()\n  const [data, setData] = React.useState([])\n  useEffect(() => {\n    const fetchProducts = async () => {\n      const res = await fetch(\n        `/api/products/browsing-history?type=${type}&excludeId=${excludeId}&categories=${products\n          .map((product) => product.category)\n          .join(',')}&ids=${products.map((product) => product.id).join(',')}`\n      )\n      const data = await res.json()\n      setData(data)\n    }\n    fetchProducts()\n  }, [excludeId, products, type])\n\n  return (\n    data.length > 0 && (\n      <ProductSlider title={title} products={data} hideDetails={hideDetails} />\n    )\n  )\n}\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}