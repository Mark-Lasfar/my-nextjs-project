{"version":3,"names":["_default","cov_23q4bxftlf","s","webPageDefaultValues","process","env","NODE_ENV","b","title","slug","content","WebPageForm","type","webPage","webPageId","f","router","_navigation","useRouter","form","_reacthookform","useForm","resolver","_zod","zodResolver","_validator","WebPageUpdateSchema","WebPageInputSchema","defaultValues","toast","_usetoast","useToast","onSubmit","values","res","_webpageactions","createWebPage","success","variant","description","message","push","updateWebPage","_id","_jsxruntime","jsx","_form","Form","jsxs","method","handleSubmit","className","FormField","control","name","render","field","FormItem","FormLabel","FormControl","_input","Input","placeholder","FormMessage","onClick","setValue","_utils","toSlug","getValues","_reactmarkdowneditorlite","default","style","height","renderHTML","text","_reactmarkdown","onChange","_checkbox","Checkbox","checked","value","onCheckedChange","_button","Button","size","disabled","formState","isSubmitting"],"sources":["/home/mark/Downloads/nextjs-amazona-main/app/[locale]/admin/web-pages/web-page-form.tsx"],"sourcesContent":["'use client'\n\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { useRouter } from 'next/navigation'\nimport { useForm } from 'react-hook-form'\n\nimport { z } from 'zod'\n\nimport MdEditor from 'react-markdown-editor-lite'\nimport ReactMarkdown from 'react-markdown'\nimport 'react-markdown-editor-lite/lib/index.css'\nimport { Button } from '@/components/ui/button'\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form'\nimport { Input } from '@/components/ui/input'\nimport { useToast } from '@/hooks/use-toast'\nimport { createWebPage, updateWebPage } from '@/lib/actions/web-page.actions'\nimport { IWebPage } from '@/lib/db/models/web-page.model'\nimport { WebPageInputSchema, WebPageUpdateSchema } from '@/lib/validator'\nimport { Checkbox } from '@/components/ui/checkbox'\nimport { toSlug } from '@/lib/utils'\n\nconst webPageDefaultValues =\n  process.env.NODE_ENV === 'development'\n    ? {\n        title: 'Sample Page',\n        slug: 'sample-page',\n        content: 'Sample Content',\n      }\n    : {\n        title: '',\n        slug: '',\n        content: '',\n      }\n\nconst WebPageForm = ({\n  type,\n  webPage,\n  webPageId,\n}: {\n  type: 'Create' | 'Update'\n  webPage?: IWebPage\n  webPageId?: string\n}) => {\n  const router = useRouter()\n\n  const form = useForm<z.infer<typeof WebPageInputSchema>>({\n    resolver:\n      type === 'Update'\n        ? zodResolver(WebPageUpdateSchema)\n        : zodResolver(WebPageInputSchema),\n    defaultValues:\n      webPage && type === 'Update' ? webPage : webPageDefaultValues,\n  })\n\n  const { toast } = useToast()\n  async function onSubmit(values: z.infer<typeof WebPageInputSchema>) {\n    if (type === 'Create') {\n      const res = await createWebPage(values)\n      if (!res.success) {\n        toast({\n          variant: 'destructive',\n          description: res.message,\n        })\n      } else {\n        toast({\n          description: res.message,\n        })\n        router.push(`/admin/web-pages`)\n      }\n    }\n    if (type === 'Update') {\n      if (!webPageId) {\n        router.push(`/admin/web-pages`)\n        return\n      }\n      const res = await updateWebPage({ ...values, _id: webPageId })\n      if (!res.success) {\n        toast({\n          variant: 'destructive',\n          description: res.message,\n        })\n      } else {\n        router.push(`/admin/web-pages`)\n      }\n    }\n  }\n\n  return (\n    <Form {...form}>\n      <form\n        method=\"post\"\n        onSubmit={form.handleSubmit(onSubmit)}\n        className=\"space-y-8\"\n      >\n        <div className=\"flex flex-col gap-5 md:flex-row\">\n          <FormField\n            control={form.control}\n            name=\"title\"\n            render={({ field }) => (\n              <FormItem className=\"w-full\">\n                <FormLabel>Title</FormLabel>\n                <FormControl>\n                  <Input placeholder=\"Enter title\" {...field} />\n                </FormControl>\n\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <FormField\n            control={form.control}\n            name=\"slug\"\n            render={({ field }) => (\n              <FormItem className=\"w-full\">\n                <FormLabel>Slug</FormLabel>\n\n                <FormControl>\n                  <div className=\"relative\">\n                    <Input\n                      placeholder=\"Enter slug\"\n                      className=\"pl-8\"\n                      {...field}\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        form.setValue('slug', toSlug(form.getValues('title')))\n                      }}\n                      className=\"absolute right-2 top-2.5\"\n                    >\n                      Generate\n                    </button>\n                  </div>\n                </FormControl>\n\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n        </div>\n        <div className=\"flex flex-col gap-5 md:flex-row\">\n          <FormField\n            control={form.control}\n            name=\"content\"\n            render={({ field }) => (\n              <FormItem className=\"w-full\">\n                <FormLabel>Content</FormLabel>\n                <FormControl>\n                  <MdEditor\n                    // value={markdown}\n                    {...field}\n                    style={{ height: '500px' }}\n                    renderHTML={(text) => <ReactMarkdown>{text}</ReactMarkdown>}\n                    onChange={({ text }) => form.setValue('content', text)}\n                  />\n\n                  {/* <Textarea placeholder='Enter content' {...field} /> */}\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n        </div>\n        <div>\n          <FormField\n            control={form.control}\n            name=\"isPublished\"\n            render={({ field }) => (\n              <FormItem className=\"space-x-2 items-center\">\n                <FormControl>\n                  <Checkbox\n                    checked={field.value}\n                    onCheckedChange={field.onChange}\n                  />\n                </FormControl>\n                <FormLabel>Is Published?</FormLabel>\n              </FormItem>\n            )}\n          />\n        </div>\n        <div>\n          <Button\n            type=\"submit\"\n            size=\"lg\"\n            disabled={form.formState.isSubmitting}\n            className=\"button col-span-2 w-full\"\n          >\n            {form.formState.isSubmitting ? 'Submitting...' : `${type} Page `}\n          </Button>\n        </div>\n      </form>\n    </Form>\n  )\n}\n\nexport default WebPageForm\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}