{"version":3,"names":["default","cov_roz4ynovq","f","s","AdminUser","metadata","title","props","searchParams","session","_auth","auth","user","role","b","Error","page","Number","users","_useractions","getAllUsers","_jsxruntime","jsxs","className","jsx","_table","Table","TableHeader","TableRow","TableHead","TableBody","data","map","TableCell","_utils","formatId","_id","name","email","_button","Button","asChild","variant","size","_link","href","_deletedialog","id","action","deleteUser","totalPages","_pagination"],"sources":["/home/mark/Downloads/nextjs-amazona-main/app/[locale]/admin/users/page.tsx"],"sourcesContent":["import { Metadata } from 'next'\nimport Link from 'next/link'\n\nimport { auth } from '@/auth'\nimport DeleteDialog from '@/components/shared/delete-dialog'\nimport Pagination from '@/components/shared/pagination'\nimport { Button } from '@/components/ui/button'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport { deleteUser, getAllUsers } from '@/lib/actions/user.actions'\nimport { IUser } from '@/lib/db/models/user.model'\nimport { formatId } from '@/lib/utils'\n\nexport const metadata: Metadata = {\n  title: 'Admin Users',\n}\n\nexport default async function AdminUser(props: {\n  searchParams: Promise<{ page: string }>\n}) {\n  const searchParams = await props.searchParams\n  const session = await auth()\n  if (session?.user.role !== 'Admin')\n    throw new Error('Admin permission required')\n  const page = Number(searchParams.page) || 1\n  const users = await getAllUsers({\n    page,\n  })\n  return (\n    <div className=\"space-y-2\">\n      <h1 className=\"h1-bold\">Users</h1>\n      <div>\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHead>Id</TableHead>\n              <TableHead>Name</TableHead>\n              <TableHead>Email</TableHead>\n              <TableHead>Role</TableHead>\n              <TableHead>Actions</TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {users?.data.map((user: IUser) => (\n              <TableRow key={user._id}>\n                <TableCell>{formatId(user._id)}</TableCell>\n                <TableCell>{user.name}</TableCell>\n                <TableCell>{user.email}</TableCell>\n                <TableCell>{user.role}</TableCell>\n                <TableCell className=\"flex gap-1\">\n                  <Button asChild variant=\"outline\" size=\"sm\">\n                    <Link href={`/admin/users/${user._id}`}>Edit</Link>\n                  </Button>\n                  <DeleteDialog id={user._id} action={deleteUser} />\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n        {users?.totalPages > 1 && (\n          <Pagination page={page} totalPages={users?.totalPages} />\n        )}\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]}