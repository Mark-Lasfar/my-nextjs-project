{"version":3,"names":["default","cov_1a7cew2hu7","f","s","sitemap","revalidate","STATIC_PAGES","path","priority","DEFAULT_BASE_URL","getBaseUrl","url","b","replace","process","env","VERCEL_URL","createStaticRoutes","baseUrl","routes","locale","_routing","routing","locales","push","lastModified","Date","changeFrequency","_db","connectToDatabase","site","_settingactions","getSetting","products","_productmodel","find","isPublished","deletedAt","$exists","select","lean","productUrls","product","slug","updatedAt","staticRoutes","error","console","map","route","Math","max"],"sources":["/home/mark/Downloads/nextjs-amazona-main/app/sitemap.ts"],"sourcesContent":["import { MetadataRoute } from 'next'\nimport { getSetting } from '@/lib/actions/setting.actions'\nimport Product from '@/lib/db/models/product.model'\nimport { connectToDatabase } from '@/lib/db'\nimport { routing } from '@/i18n/routing'\n\ntype SitemapEntry = {\n  url: string\n  lastModified: Date\n  changeFrequency:\n    | 'always'\n    | 'hourly'\n    | 'daily'\n    | 'weekly'\n    | 'monthly'\n    | 'yearly'\n    | 'never'\n  priority: number\n}\n\nconst STATIC_PAGES = [\n  { path: '', priority: 1.0 },\n  { path: '/search', priority: 0.8 },\n  { path: '/cart', priority: 0.6 },\n  { path: '/categories', priority: 0.8 },\n  { path: '/blog', priority: 0.9 },\n] as const\n\nconst DEFAULT_BASE_URL = 'https://hager-zon.vercel.app'\n\nconst getBaseUrl = (url?: string): string => {\n  if (url) return url.replace(/\\/+$/, '') // Remove trailing slashes\n  if (process.env.VERCEL_URL) return `https://${process.env.VERCEL_URL.replace(/\\/+$/, '')}`\n  return DEFAULT_BASE_URL.replace(/\\/+$/, '') // Default base URL without trailing slashes\n}\n\nconst createStaticRoutes = (baseUrl: string): SitemapEntry[] => {\n  const routes: SitemapEntry[] = []\n\n  for (const locale of routing.locales) {\n    for (const { path, priority } of STATIC_PAGES) {\n      routes.push({\n        url: `${baseUrl}/${locale}${path}`,\n        lastModified: new Date(),\n        changeFrequency: 'daily',\n        priority,\n      })\n    }\n  }\n\n  return routes\n}\n\nexport default async function sitemap(): Promise<MetadataRoute.Sitemap> {\n  try {\n    await connectToDatabase()\n\n    const {\n      site: { url },\n    } = await getSetting()\n    const baseUrl = getBaseUrl(url)\n\n    const products = await Product.find({\n      isPublished: true,\n      deletedAt: { $exists: false },\n    })\n      .select('slug updatedAt')\n      .lean()\n\n    const productUrls: SitemapEntry[] = []\n\n    for (const product of products) {\n      for (const locale of routing.locales) {\n        productUrls.push({\n          url: `${baseUrl}/${locale}/product/${product.slug}`,\n          lastModified: product.updatedAt || new Date(),\n          changeFrequency: 'daily',\n          priority: 0.8,\n        })\n      }\n    }\n\n    const staticRoutes = createStaticRoutes(baseUrl)\n    return [...staticRoutes, ...productUrls]\n  } catch (error) {\n    console.error('Error generating sitemap:', error)\n    const baseUrl = DEFAULT_BASE_URL\n    return createStaticRoutes(baseUrl).map((route) => ({\n      ...route,\n      priority: Math.max(route.priority - 0.2, 0),\n    }))\n  }\n}\n\nexport const revalidate = 3600"],"mappings":"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","ignoreList":[]}