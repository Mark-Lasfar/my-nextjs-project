{"version":3,"names":["default","cov_1gp01vcu8e","f","s","OrdersPage","metadata","title","props","searchParams","page","b","session","_auth","auth","user","role","Error","orders","_orderactions","getAllOrders","Number","_jsxruntime","jsxs","className","jsx","_table","Table","TableHeader","TableRow","TableHead","TableBody","data","map","order","TableCell","_utils","formatId","_id","formatDateTime","createdAt","dateTime","name","_productprice","price","totalPrice","plain","isPaid","paidAt","isDelivered","deliveredAt","_button","Button","asChild","variant","size","_link","href","_deletedialog","id","action","deleteOrder","totalPages","_pagination"],"sources":["/home/mark/Downloads/nextjs-amazona-main/app/[locale]/admin/orders/page.tsx"],"sourcesContent":["import { Metadata } from 'next'\nimport Link from 'next/link'\n\nimport { auth } from '@/auth'\nimport DeleteDialog from '@/components/shared/delete-dialog'\nimport Pagination from '@/components/shared/pagination'\nimport { Button } from '@/components/ui/button'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport { deleteOrder, getAllOrders } from '@/lib/actions/order.actions'\nimport { formatDateTime, formatId } from '@/lib/utils'\nimport { IOrderList } from '@/types'\nimport ProductPrice from '@/components/shared/product/product-price'\n\nexport const metadata: Metadata = {\n  title: 'Admin Orders',\n}\nexport default async function OrdersPage(props: {\n  searchParams: Promise<{ page: string }>\n}) {\n  const searchParams = await props.searchParams\n\n  const { page = '1' } = searchParams\n\n  const session = await auth()\n  if (session?.user.role !== 'Admin')\n    throw new Error('Admin permission required')\n\n  const orders = await getAllOrders({\n    page: Number(page),\n  })\n  return (\n    <div className=\"space-y-2\">\n      <h1 className=\"h1-bold\">Orders</h1>\n      <div className=\"overflow-x-auto\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHead>Id</TableHead>\n              <TableHead>Date</TableHead>\n              <TableHead>Buyer</TableHead>\n              <TableHead>Total</TableHead>\n              <TableHead>Paid</TableHead>\n              <TableHead>Delivered</TableHead>\n              <TableHead>Actions</TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {orders.data.map((order: IOrderList) => (\n              <TableRow key={order._id}>\n                <TableCell>{formatId(order._id)}</TableCell>\n                <TableCell>\n                  {formatDateTime(order.createdAt!).dateTime}\n                </TableCell>\n                <TableCell>\n                  {order.user ? order.user.name : 'Deleted User'}\n                </TableCell>\n                <TableCell>\n                  {' '}\n                  <ProductPrice price={order.totalPrice} plain />\n                </TableCell>\n                <TableCell>\n                  {order.isPaid && order.paidAt\n                    ? formatDateTime(order.paidAt).dateTime\n                    : 'No'}\n                </TableCell>\n                <TableCell>\n                  {order.isDelivered && order.deliveredAt\n                    ? formatDateTime(order.deliveredAt).dateTime\n                    : 'No'}\n                </TableCell>\n                <TableCell className=\"flex gap-1\">\n                  <Button asChild variant=\"outline\" size=\"sm\">\n                    <Link href={`/admin/orders/${order._id}`}>Details</Link>\n                  </Button>\n                  <DeleteDialog id={order._id} action={deleteOrder} />\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n        {orders.totalPages > 1 && (\n          <Pagination page={page} totalPages={orders.totalPages!} />\n        )}\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]}