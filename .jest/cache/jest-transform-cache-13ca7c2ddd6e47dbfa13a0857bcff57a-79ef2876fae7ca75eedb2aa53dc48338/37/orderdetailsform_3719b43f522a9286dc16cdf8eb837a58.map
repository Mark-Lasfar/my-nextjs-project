{"version":3,"names":["OrderDetailsForm","order","isAdmin","cov_gjqb013ci","f","shippingAddress","items","itemsPrice","taxPrice","shippingPrice","totalPrice","paymentMethod","isPaid","paidAt","isDelivered","deliveredAt","expectedDeliveryDate","s","_jsxruntime","jsxs","className","jsx","_card","Card","CardContent","fullName","phone","street","city","province","postalCode","country","b","_badge","Badge","_utils","formatDateTime","dateTime","variant","_table","Table","TableHeader","TableRow","TableHead","TableBody","map","item","TableCell","_link","default","href","slug","_image","src","image","alt","name","width","height","quantity","price","_productprice","plain","includes","cn","_button","buttonVariants","_id","_actionbutton","caption","action","_orderactions","updateOrderToPaid","deliverOrder"],"sources":["/home/mark/Downloads/nextjs-amazona-main/components/shared/order/order-details-form.tsx"],"sourcesContent":["'use client'\n\nimport Image from 'next/image'\nimport Link from 'next/link'\n\nimport { Badge } from '@/components/ui/badge'\nimport { Card, CardContent } from '@/components/ui/card'\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table'\nimport { IOrder } from '@/lib/db/models/order.model'\nimport { cn, formatDateTime } from '@/lib/utils'\nimport { buttonVariants } from '@/components/ui/button'\nimport ProductPrice from '../product/product-price'\nimport ActionButton from '../action-button'\nimport { deliverOrder, updateOrderToPaid } from '@/lib/actions/order.actions'\n\nexport default function OrderDetailsForm({\n  order,\n  isAdmin,\n}: {\n  order: IOrder\n  isAdmin: boolean\n}) {\n  const {\n    shippingAddress,\n    items,\n    itemsPrice,\n    taxPrice,\n    shippingPrice,\n    totalPrice,\n    paymentMethod,\n    isPaid,\n    paidAt,\n    isDelivered,\n    deliveredAt,\n    expectedDeliveryDate,\n  } = order\n\n  return (\n    <div className=\"grid md:grid-cols-3 md:gap-5\">\n      <div className=\"overflow-x-auto md:col-span-2 space-y-4\">\n        <Card>\n          <CardContent className=\"p-4 gap-4\">\n            <h2 className=\"text-xl pb-4\">Shipping Address</h2>\n            <p>\n              {shippingAddress.fullName} {shippingAddress.phone}\n            </p>\n            <p>\n              {shippingAddress.street}, {shippingAddress.city},{' '}\n              {shippingAddress.province}, {shippingAddress.postalCode},{' '}\n              {shippingAddress.country}{' '}\n            </p>\n\n            {isDelivered ? (\n              <Badge>\n                Delivered at {formatDateTime(deliveredAt!).dateTime}\n              </Badge>\n            ) : (\n              <div>\n                {' '}\n                <Badge variant=\"destructive\">Not delivered</Badge>\n                <div>\n                  Expected delivery at{' '}\n                  {formatDateTime(expectedDeliveryDate!).dateTime}\n                </div>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"p-4 gap-4\">\n            <h2 className=\"text-xl pb-4\">Payment Method</h2>\n            <p>{paymentMethod}</p>\n            {isPaid ? (\n              <Badge>Paid at {formatDateTime(paidAt!).dateTime}</Badge>\n            ) : (\n              <Badge variant=\"destructive\">Not paid</Badge>\n            )}\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"p-4   gap-4\">\n            <h2 className=\"text-xl pb-4\">Order Items</h2>\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Item</TableHead>\n                  <TableHead>Quantity</TableHead>\n                  <TableHead>Price</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {items.map((item) => (\n                  <TableRow key={item.slug}>\n                    <TableCell>\n                      <Link\n                        href={`/product/${item.slug}`}\n                        className=\"flex items-center\"\n                      >\n                        <Image\n                          src={item.image}\n                          alt={item.name}\n                          width={50}\n                          height={50}\n                        ></Image>\n                        <span className=\"px-2\">{item.name}</span>\n                      </Link>\n                    </TableCell>\n                    <TableCell>\n                      <span className=\"px-2\">{item.quantity}</span>\n                    </TableCell>\n                    <TableCell className=\"text-right\">${item.price}</TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </CardContent>\n        </Card>\n      </div>\n      <div>\n        <Card>\n          <CardContent className=\"p-4  space-y-4 gap-4\">\n            <h2 className=\"text-xl pb-4\">Order Summary</h2>\n            <div className=\"flex justify-between\">\n              <div>Items</div>\n              <div>\n                {' '}\n                <ProductPrice price={itemsPrice} plain />\n              </div>\n            </div>\n            <div className=\"flex justify-between\">\n              <div>Tax</div>\n              <div>\n                {' '}\n                <ProductPrice price={taxPrice} plain />\n              </div>\n            </div>\n            <div className=\"flex justify-between\">\n              <div>Shipping</div>\n              <div>\n                {' '}\n                <ProductPrice price={shippingPrice} plain />\n              </div>\n            </div>\n            <div className=\"flex justify-between\">\n              <div>Total</div>\n              <div>\n                {' '}\n                <ProductPrice price={totalPrice} plain />\n              </div>\n            </div>\n\n            {!isPaid && ['Stripe', 'PayPal'].includes(paymentMethod) && (\n              <Link\n                className={cn(buttonVariants(), 'w-full')}\n                href={`/checkout/${order._id}`}\n              >\n                Pay Order\n              </Link>\n            )}\n\n            {isAdmin && !isPaid && paymentMethod === 'Cash On Delivery' && (\n              <ActionButton\n                caption=\"Mark as paid\"\n                action={() => updateOrderToPaid(order._id)}\n              />\n            )}\n            {isAdmin && isPaid && !isDelivered && (\n              <ActionButton\n                caption=\"Mark as delivered\"\n                action={() => deliverOrder(order._id)}\n              />\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]}