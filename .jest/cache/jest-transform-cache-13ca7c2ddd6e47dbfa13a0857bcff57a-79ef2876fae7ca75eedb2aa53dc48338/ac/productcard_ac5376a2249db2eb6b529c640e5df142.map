{"version":3,"names":["_default","ProductCard","product","hideBorder","cov_s1mpg13r","b","hideDetails","hideAddToCart","f","s","ProductImage","hasImages","Array","isArray","images","length","fallbackImage","_jsxruntime","jsx","_link","default","href","slug","className","_imagehover","src","hoverSrc","alt","name","_image","fill","sizes","ProductDetails","jsxs","brand","style","display","WebkitLineClamp","WebkitBoxOrient","_rating","rating","avgRating","_utils","formatNumber","numReviews","_productprice","isDeal","tags","includes","price","listPrice","forListing","AddButton","_addtocart","minimal","item","clientId","generateId","_id","size","color","colors","countInStock","category","round2","quantity","image","Fragment","_card","Card","CardHeader","CardContent","CardFooter"],"sources":["/home/mark/Downloads/nextjs-amazona-main/components/shared/product/product-card.tsx"],"sourcesContent":["import Image from 'next/image'\nimport Link from 'next/link'\nimport React from 'react'\n\nimport { Card, CardContent, CardFooter, CardHeader } from '@/components/ui/card'\nimport { IProduct } from '@/lib/db/models/product.model'\n\nimport Rating from './rating'\nimport { formatNumber, generateId, round2 } from '@/lib/utils'\nimport ProductPrice from './product-price'\nimport ImageHover from './image-hover'\nimport AddToCart from './add-to-cart'\n\nconst ProductCard = ({\n  product,\n  hideBorder = false,\n  hideDetails = false,\n  hideAddToCart = false,\n}: {\n  product: IProduct\n  hideDetails?: boolean\n  hideBorder?: boolean\n  hideAddToCart?: boolean\n}) => {\n  const ProductImage = () => {\n    const hasImages = Array.isArray(product.images) && product.images.length > 0\n    const fallbackImage = '/images/fallback.jpg' // Provide a fallback image\n\n    return (\n      <Link href={`/product/${product.slug}`}>\n        <div className=\"relative h-52\">\n          {hasImages && product.images.length > 1 ? (\n            <ImageHover\n              src={product.images[0]}\n              hoverSrc={product.images[1]}\n              alt={product.name}\n            />\n          ) : hasImages ? (\n            <div className=\"relative h-52\">\n              <Image\n                src={product.images[0]}\n                alt={product.name}\n                fill\n                sizes=\"80vw\"\n                className=\"object-contain\"\n              />\n            </div>\n          ) : (\n            <div className=\"relative h-52\">\n              <Image\n                src={fallbackImage}\n                alt={`${product.name} (Fallback Image)`}\n                fill\n                sizes=\"80vw\"\n                className=\"object-contain\"\n              />\n            </div>\n          )}\n        </div>\n      </Link>\n    )\n  }\n\n  const ProductDetails = () => (\n    <div className=\"flex-1 space-y-2\">\n      <p className=\"font-bold\">{product.brand}</p>\n      <Link\n        href={`/product/${product.slug}`}\n        className=\"overflow-hidden text-ellipsis\"\n        style={{\n          display: '-webkit-box',\n          WebkitLineClamp: 2,\n          WebkitBoxOrient: 'vertical',\n        }}\n      >\n        {product.name}\n      </Link>\n      <div className=\"flex gap-2 justify-center\">\n        <Rating rating={product.avgRating} />\n        <span>({formatNumber(product.numReviews)})</span>\n      </div>\n\n      <ProductPrice\n        isDeal={\n          Array.isArray(product.tags) && product.tags.includes('todays-deal')\n        } // Ensure tags is valid\n        price={product.price}\n        listPrice={product.listPrice}\n        forListing\n      />\n    </div>\n  )\n\n  const AddButton = () => (\n    <div className=\"w-full text-center\">\n      <AddToCart\n        minimal\n        item={{\n          clientId: generateId(),\n          product: product._id,\n          size: product.sizes?.[0] || 'N/A', // Ensure size exists\n          color: product.colors?.[0] || 'N/A', // Ensure color exists\n          countInStock: product.countInStock,\n          name: product.name,\n          slug: product.slug,\n          category: product.category,\n          price: round2(product.price),\n          quantity: 1,\n          image:\n            Array.isArray(product.images) && product.images.length > 0\n              ? product.images[0]\n              : '/images/fallback.jpg',\n        }}\n      />\n    </div>\n  )\n\n  return hideBorder ? (\n    <div className=\"flex flex-col\">\n      <ProductImage />\n      {!hideDetails && (\n        <>\n          <div className=\"p-3 flex-1 text-center\">\n            <ProductDetails />\n          </div>\n          {!hideAddToCart && <AddButton />}\n        </>\n      )}\n    </div>\n  ) : (\n    <Card className=\"flex flex-col\">\n      <CardHeader className=\"p-3\">\n        <ProductImage />\n      </CardHeader>\n      {!hideDetails && (\n        <>\n          <CardContent className=\"p-3 flex-1 text-center\">\n            <ProductDetails />\n          </CardContent>\n          <CardFooter className=\"p-3\">\n            {!hideAddToCart && <AddButton />}\n          </CardFooter>\n        </>\n      )}\n    </Card>\n  )\n}\n\nexport default ProductCard\n"],"mappings":"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","ignoreList":[]}