{"version":3,"names":["StripeForm","priceInCents","orderId","cov_2epnnykd21","f","setting","site","s","_usesettingstore","default","stripe","_reactstripejs","useStripe","elements","useElements","isLoading","setIsLoading","_react","useState","errorMessage","setErrorMessage","email","setEmail","handleSubmit","e","preventDefault","b","confirmPayment","confirmParams","return_url","url","then","error","type","message","finally","_jsxruntime","jsxs","onSubmit","className","jsx","PaymentElement","LinkAuthenticationElement","onChange","value","_button","Button","size","disabled","_productprice","price","plain"],"sources":["/home/mark/Downloads/nextjs-amazona-main/app/[locale]/checkout/[id]/stripe-form.tsx"],"sourcesContent":["import {\n  LinkAuthenticationElement,\n  PaymentElement,\n  useElements,\n  useStripe,\n} from '@stripe/react-stripe-js'\nimport { FormEvent, useState } from 'react'\n\nimport { Button } from '@/components/ui/button'\nimport ProductPrice from '@/components/shared/product/product-price'\nimport useSettingStore from '@/hooks/use-setting-store'\n\nexport default function StripeForm({\n  priceInCents,\n  orderId,\n}: {\n  priceInCents: number\n  orderId: string\n}) {\n  const {\n    setting: { site },\n  } = useSettingStore()\n\n  const stripe = useStripe()\n  const elements = useElements()\n  const [isLoading, setIsLoading] = useState(false)\n  const [errorMessage, setErrorMessage] = useState<string>()\n  const [email, setEmail] = useState<string>()\n\n  async function handleSubmit(e: FormEvent) {\n    e.preventDefault()\n\n    if (stripe == null || elements == null || email == null) return\n\n    setIsLoading(true)\n    stripe\n      .confirmPayment({\n        elements,\n        confirmParams: {\n          return_url: `${site.url}/checkout/${orderId}/stripe-payment-success`,\n        },\n      })\n      .then(({ error }) => {\n        if (error.type === 'card_error' || error.type === 'validation_error') {\n          setErrorMessage(error.message)\n        } else {\n          setErrorMessage('An unknown error occurred')\n        }\n      })\n      .finally(() => setIsLoading(false))\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div className=\"text-xl\">Stripe Checkout</div>\n      {errorMessage && <div className=\"text-destructive\">{errorMessage}</div>}\n      <PaymentElement />\n      <div>\n        <LinkAuthenticationElement onChange={(e) => setEmail(e.value.email)} />\n      </div>\n      <Button\n        className=\"w-full\"\n        size=\"lg\"\n        disabled={stripe == null || elements == null || isLoading}\n      >\n        {isLoading ? (\n          'Purchasing...'\n        ) : (\n          <div>\n            Purchase - <ProductPrice price={priceInCents / 100} plain />\n          </div>\n        )}\n      </Button>\n    </form>\n  )\n}\n"],"mappings":"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","ignoreList":[]}